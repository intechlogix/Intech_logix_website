import{j as e,m as N}from"./framer-COzEGCbb.js";import{e as P,r as l}from"./vendor-Dv7kjqZE.js";import{u as U,c as r,a as E}from"./index-BUXqrj-f.js";import{U as O,b as q,l as F,j as G,Y as M,T as z,S as B,_ as V,R as b,$ as w,m as W,a0 as X}from"./ui-CJlTBqfs.js";const K=()=>{const{user:v,signOut:C}=U(),S=P(),[k,u]=l.useState([]),[i,A]=l.useState({total:0,new:0,inProgress:0,completed:0}),[L,p]=l.useState(!0),[a,d]=l.useState(null),[n,D]=l.useState(""),[m,R]=l.useState("all");l.useEffect(()=>{I(),x();const s=r.listenToContacts(t=>{u(t),p(!1)});return()=>s()},[]);const I=async()=>{const s=await r.getContacts();s.success&&u(s.contacts),p(!1)},x=async()=>{const s=await E.getLeadStats();s.success&&A(s.stats)},g=async(s,t)=>{(await r.updateContactStatus(s,t)).success&&x()},j=async s=>{await r.markAsRead(s)},f=async s=>{window.confirm("Are you sure you want to delete this contact?")&&(await r.deleteContact(s)).success&&x()},T=async()=>{await C(),S("/admin/login")},o=s=>s?new Date(s.seconds*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",h=s=>{switch(s){case"new":return"bg-blue-100 text-blue-800";case"in-progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},c=k.filter(s=>{const t=s.name.toLowerCase().includes(n.toLowerCase())||s.email.toLowerCase().includes(n.toLowerCase())||s.company?.toLowerCase().includes(n.toLowerCase()),y=m==="all"||s.status===m;return t&&y}),$=[{title:"Total Leads",value:i.total,icon:O,color:"bg-blue-500",change:"+12%"},{title:"New Leads",value:i.new,icon:q,color:"bg-green-500",change:"+8%"},{title:"In Progress",value:i.inProgress,icon:F,color:"bg-yellow-500",change:"+5%"},{title:"Completed",value:i.completed,icon:G,color:"bg-purple-500",change:"+15%"}];return L?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center py-4 sm:h-16",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center w-full sm:w-auto mb-4 sm:mb-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold gradient-text",children:"Intech Logix"}),e.jsx("span",{className:"mt-1 sm:mt-0 sm:ml-4 text-gray-600",children:"Admin Dashboard"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4 w-full sm:w-auto",children:[e.jsxs("span",{className:"text-sm sm:text-base text-gray-600 truncate",children:["Welcome, ",v?.email]}),e.jsxs("button",{onClick:T,className:"flex items-center justify-center w-full sm:w-auto px-4 py-2 sm:py-1 text-gray-600 hover:text-red-600 transition-colors duration-200 border border-gray-300 rounded-md sm:border-none",children:[e.jsx(M,{className:"h-5 w-5 mr-2 sm:mr-1"}),"Sign Out"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-8",children:$.map((s,t)=>e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},className:"bg-white rounded-lg shadow-md p-4 sm:p-6 border border-gray-200 hover:shadow-lg transition-shadow duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:s.title}),e.jsx("p",{className:"text-xl sm:text-3xl font-bold text-gray-900",children:s.value})]}),e.jsx("div",{className:`p-2 sm:p-3 rounded-full ${s.color}`,children:e.jsx(s.icon,{className:"h-4 w-4 sm:h-6 sm:w-6 text-white"})})]}),e.jsxs("div",{className:"mt-2 sm:mt-4 flex items-center",children:[e.jsx(z,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-xs sm:text-sm text-green-500 font-medium",children:s.change}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 ml-1 hidden sm:inline",children:"from last month"})]})]},t))}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search contacts...",value:n,onChange:s=>D(s.target.value),className:"w-full pl-10 pr-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center space-x-2 w-full",children:[e.jsx(V,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),e.jsxs("select",{value:m,onChange:s=>R(s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]})]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Contact Leads (",c.length,")"]})}),e.jsx("div",{className:"block sm:hidden",children:e.jsx("div",{className:"space-y-4",children:c.map(s=>e.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${s.isRead?"":"border-l-4 border-blue-500"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[s.name,!s.isRead&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"New"})]}),e.jsx("div",{className:"text-xs text-gray-500",children:s.email})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Service:"}),e.jsx("span",{className:"text-xs text-gray-900",children:s.service||"General Inquiry"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Date:"}),e.jsx("span",{className:"text-xs text-gray-900",children:o(s.createdAt)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Status:"}),e.jsxs("select",{value:s.status,onChange:t=>g(s.id,t.target.value),className:`text-xs font-medium px-2 py-1 rounded-full border-none focus:outline-none focus:ring-2 focus:ring-blue-500 ${h(s.status)}`,children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-3",children:[e.jsxs("button",{onClick:()=>{d(s),s.isRead||j(s.id)},className:"flex items-center text-blue-600 text-sm",children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs("button",{onClick:()=>f(s.id),className:"flex items-center text-red-600 text-sm",children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},s.id))})}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(s=>e.jsxs("tr",{className:`hover:bg-gray-50 ${s.isRead?"":"bg-blue-50"}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium",children:s.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[s.name,!s.isRead&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"New"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email}),s.company&&e.jsx("div",{className:"text-sm text-gray-500",children:s.company})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:s.service||"General Inquiry"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:s.status,onChange:t=>g(s.id,t.target.value),className:`text-sm font-medium px-2 py-1 rounded-full border-none focus:outline-none focus:ring-2 focus:ring-blue-500 ${h(s.status)}`,children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o(s.createdAt)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{d(s),s.isRead||j(s.id)},className:"text-blue-600 hover:text-blue-900 transition-colors duration-200",children:e.jsx(b,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>f(s.id),className:"text-red-600 hover:text-red-900 transition-colors duration-200",children:e.jsx(w,{className:"h-4 w-4"})})]})})]},s.id))})]})}),c.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(W,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No contacts found"})]})]})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-2 sm:p-4 z-50",children:e.jsxs(N.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] sm:max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Contact Details"}),e.jsx("button",{onClick:()=>d(null),className:"text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1",children:e.jsx(X,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900 break-all",children:a.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Company"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.company||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Service"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.service||"General Inquiry"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h(a.status)}`,children:a.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:o(a.createdAt)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Message"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4",children:e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap break-words",children:a.message})})]})]})]})})]})};export{K as default};
//# sourceMappingURL=AdminDashboard-C-PVaFDw.js.map
